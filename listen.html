---
layout: none
---
<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
{% include head.html %}

<body>

    <header>
        <div class="player-header">
            <img src="/assets/images/og_image.png" />
        </div>
        {% include google-ads-episode.html %}
        <div id="player">
        </div>

    </header>
    <main class="listen-main">
        <div id="episode"></div>
        <div id="summary"></div>
    </main>

    {% include footer.html %}
    {% include scripts.html %}
    <script>
        var url = new URL(location);
        var episodeId = url.searchParams.get('e');

        fetch('/episodes.json')
            .then(r => r.json())
            .then(r => r.episodes.filter(e => e.id === episodeId))
            .then(r => {
                if (r.length === 0) {
                    throw new Error('No episode found');
                } else {
                    return r[0];
                }
            })
            .then(e => {
                let ex = document.getElementById("summary");
                let ep = document.getElementById("episode");
                let pl = document.getElementById("player");

                ex.innerText = e.summary;
                ep.innerText = `You're listening to Episode ${e.episode}: ${e.title}`
                pl.innerHTML = `<iframe src="${e.file}" frameborder="0"
                webkitallowfullscreen="false" mozallowfullscreen="false" width="320" height="30"></iframe>`;
            })
            .catch(err => {
                console.log(err);
                location = "/404/?url=" + encodeURIComponent(location);
            });
    </script>
</body>

</html>